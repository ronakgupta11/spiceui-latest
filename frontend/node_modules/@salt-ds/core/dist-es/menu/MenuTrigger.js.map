{"version":3,"file":"MenuTrigger.js","sources":["../src/menu/MenuTrigger.tsx"],"sourcesContent":["import { type ReactNode, cloneElement, isValidElement } from \"react\";\nimport { getRefFromChildren, mergeProps, useForkRef } from \"../utils\";\nimport { useMenuContext } from \"./MenuContext\";\nimport { useMenuPanelContext } from \"./MenuPanelContext\";\nimport { MenuTriggerContext } from \"./MenuTriggerContext\";\n\nexport interface MenuTriggerProps {\n  /**\n   * The trigger element for the menu. This should be a single child element and accept a ref.\n   */\n  children?: ReactNode;\n}\n\nexport function MenuTrigger(props: MenuTriggerProps) {\n  const { children } = props;\n\n  const { getReferenceProps, refs, setFocusInside, focusInside, openState } =\n    useMenuContext();\n  const { setFocusInside: setFocusInsideParent } = useMenuPanelContext();\n\n  const handleRef = useForkRef(\n    getRefFromChildren(children),\n    refs?.setReference,\n  );\n\n  if (!children || !isValidElement(children)) {\n    // Should we log or throw error?\n    return <>{children}</>;\n  }\n\n  return (\n    <MenuTriggerContext.Provider\n      value={{ triggersSubmenu: true, blurActive: focusInside && openState }}\n    >\n      {cloneElement(children, {\n        ...mergeProps(\n          getReferenceProps({\n            onFocus() {\n              setFocusInsideParent(true);\n              setFocusInside(false);\n            },\n          }),\n          children.props,\n        ),\n        ref: handleRef,\n      })}\n    </MenuTriggerContext.Provider>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAaO,SAAS,YAAY,KAAyB,EAAA;AACnD,EAAM,MAAA,EAAE,UAAa,GAAA,KAAA;AAErB,EAAA,MAAM,EAAE,iBAAmB,EAAA,IAAA,EAAM,gBAAgB,WAAa,EAAA,SAAA,KAC5D,cAAe,EAAA;AACjB,EAAA,MAAM,EAAE,cAAA,EAAgB,oBAAqB,EAAA,GAAI,mBAAoB,EAAA;AAErE,EAAA,MAAM,SAAY,GAAA,UAAA;AAAA,IAChB,mBAAmB,QAAQ,CAAA;AAAA,IAC3B,IAAM,IAAA,IAAA,GAAA,MAAA,GAAA,IAAA,CAAA;AAAA,GACR;AAEA,EAAA,IAAI,CAAC,QAAA,IAAY,CAAC,cAAA,CAAe,QAAQ,CAAG,EAAA;AAE1C,IAAA,uCAAU,QAAS,EAAA,CAAA;AAAA;AAGrB,EACE,uBAAA,GAAA;AAAA,IAAC,kBAAmB,CAAA,QAAA;AAAA,IAAnB;AAAA,MACC,OAAO,EAAE,eAAA,EAAiB,IAAM,EAAA,UAAA,EAAY,eAAe,SAAU,EAAA;AAAA,MAEpE,uBAAa,QAAU,EAAA;AAAA,QACtB,GAAG,UAAA;AAAA,UACD,iBAAkB,CAAA;AAAA,YAChB,OAAU,GAAA;AACR,cAAA,oBAAA,CAAqB,IAAI,CAAA;AACzB,cAAA,cAAA,CAAe,KAAK,CAAA;AAAA;AACtB,WACD,CAAA;AAAA,UACD,QAAS,CAAA;AAAA,SACX;AAAA,QACA,GAAK,EAAA;AAAA,OACN;AAAA;AAAA,GACH;AAEJ;;;;"}