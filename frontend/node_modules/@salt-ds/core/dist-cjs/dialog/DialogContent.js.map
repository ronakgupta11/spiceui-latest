{"version":3,"file":"DialogContent.js","sources":["../src/dialog/DialogContent.tsx"],"sourcesContent":["import { useComponentCssInjection } from \"@salt-ds/styles\";\nimport { useWindow } from \"@salt-ds/window\";\nimport { clsx } from \"clsx\";\nimport {\n  type HTMLAttributes,\n  type ReactNode,\n  forwardRef,\n  useCallback,\n  useRef,\n  useState,\n} from \"react\";\nimport {\n  makePrefixer,\n  useForkRef,\n  useIsomorphicLayoutEffect,\n  useResizeObserver,\n} from \"../utils\";\n\nimport dialogContentCss from \"./DialogContent.css\";\n\nconst withBaseName = makePrefixer(\"saltDialogContent\");\n\nexport interface DialogContentProps extends HTMLAttributes<HTMLDivElement> {\n  /**\n   * The content of Dialog Content\n   */\n  children?: ReactNode;\n}\n\nexport const DialogContent = forwardRef<HTMLDivElement, DialogContentProps>(\n  function DialogContent(props, ref) {\n    const { children, className, ...rest } = props;\n    const [scrolledTop, setScrolledTop] = useState(false);\n    const [scrolledBottom, setScrolledBottom] = useState(true);\n    const [isOverflowing, setIsOverflowing] = useState(false);\n\n    const divRef = useRef<HTMLDivElement>(null);\n    const containerRef = useForkRef(divRef, ref);\n\n    const handleScroll = () => {\n      targetWindow?.requestAnimationFrame(() => {\n        const container = divRef.current;\n        if (!container) return;\n        setScrolledTop(container.scrollTop > 0);\n        setScrolledBottom(\n          container.scrollHeight -\n            container.scrollTop -\n            container.clientHeight !==\n            0,\n        );\n      });\n    };\n\n    const targetWindow = useWindow();\n    useComponentCssInjection({\n      testId: \"salt-dialog-content\",\n      css: dialogContentCss,\n      window: targetWindow,\n    });\n\n    const checkOverflow = useCallback(() => {\n      if (!divRef.current) return;\n      setIsOverflowing(\n        divRef.current.scrollHeight > divRef.current.offsetHeight,\n      );\n    }, []);\n\n    useResizeObserver({ ref: divRef, onResize: checkOverflow });\n\n    useIsomorphicLayoutEffect(() => {\n      checkOverflow();\n    }, [checkOverflow]);\n\n    return (\n      <>\n        <div\n          className={clsx({\n            [withBaseName(\"scroll\")]: isOverflowing && scrolledTop,\n          })}\n        />\n        <div\n          className={clsx(\n            withBaseName(),\n            {\n              [withBaseName(\"overflow\")]: isOverflowing,\n            },\n            className,\n          )}\n          onScrollCapture={handleScroll}\n          {...rest}\n          ref={containerRef}\n        >\n          {children}\n        </div>\n        <div\n          className={clsx({\n            [withBaseName(\"scroll\")]: isOverflowing && scrolledBottom,\n          })}\n        />\n      </>\n    );\n  },\n);\n"],"names":["makePrefixer","forwardRef","DialogContent","useState","useRef","useForkRef","useWindow","useComponentCssInjection","dialogContentCss","useCallback","useResizeObserver","useIsomorphicLayoutEffect","jsxs","Fragment","jsx","clsx"],"mappings":";;;;;;;;;;;;;;;;;AAoBA,MAAM,YAAA,GAAeA,0BAAa,mBAAmB,CAAA;AAS9C,MAAM,aAAgB,GAAAC,gBAAA;AAAA,EAC3B,SAASC,cAAc,CAAA,KAAA,EAAO,GAAK,EAAA;AACjC,IAAA,MAAM,EAAE,QAAA,EAAU,SAAW,EAAA,GAAG,MAAS,GAAA,KAAA;AACzC,IAAA,MAAM,CAAC,WAAA,EAAa,cAAc,CAAA,GAAIC,eAAS,KAAK,CAAA;AACpD,IAAA,MAAM,CAAC,cAAA,EAAgB,iBAAiB,CAAA,GAAIA,eAAS,IAAI,CAAA;AACzD,IAAA,MAAM,CAAC,aAAA,EAAe,gBAAgB,CAAA,GAAIA,eAAS,KAAK,CAAA;AAExD,IAAM,MAAA,MAAA,GAASC,aAAuB,IAAI,CAAA;AAC1C,IAAM,MAAA,YAAA,GAAeC,qBAAW,CAAA,MAAA,EAAQ,GAAG,CAAA;AAE3C,IAAA,MAAM,eAAe,MAAM;AACzB,MAAA,YAAA,IAAA,IAAA,GAAA,MAAA,GAAA,YAAA,CAAc,sBAAsB,MAAM;AACxC,QAAA,MAAM,YAAY,MAAO,CAAA,OAAA;AACzB,QAAA,IAAI,CAAC,SAAW,EAAA;AAChB,QAAe,cAAA,CAAA,SAAA,CAAU,YAAY,CAAC,CAAA;AACtC,QAAA,iBAAA;AAAA,UACE,SAAU,CAAA,YAAA,GACR,SAAU,CAAA,SAAA,GACV,UAAU,YACV,KAAA;AAAA,SACJ;AAAA,OACF,CAAA;AAAA,KACF;AAEA,IAAA,MAAM,eAAeC,gBAAU,EAAA;AAC/B,IAAyBC,+BAAA,CAAA;AAAA,MACvB,MAAQ,EAAA,qBAAA;AAAA,MACR,GAAK,EAAAC,eAAA;AAAA,MACL,MAAQ,EAAA;AAAA,KACT,CAAA;AAED,IAAM,MAAA,aAAA,GAAgBC,kBAAY,MAAM;AACtC,MAAI,IAAA,CAAC,OAAO,OAAS,EAAA;AACrB,MAAA,gBAAA;AAAA,QACE,MAAO,CAAA,OAAA,CAAQ,YAAe,GAAA,MAAA,CAAO,OAAQ,CAAA;AAAA,OAC/C;AAAA,KACF,EAAG,EAAE,CAAA;AAEL,IAAAC,mCAAA,CAAkB,EAAE,GAAA,EAAK,MAAQ,EAAA,QAAA,EAAU,eAAe,CAAA;AAE1D,IAAAC,mDAAA,CAA0B,MAAM;AAC9B,MAAc,aAAA,EAAA;AAAA,KAChB,EAAG,CAAC,aAAa,CAAC,CAAA;AAElB,IAAA,uBAEIC,eAAA,CAAAC,mBAAA,EAAA,EAAA,QAAA,EAAA;AAAA,sBAAAC,cAAA;AAAA,QAAC,KAAA;AAAA,QAAA;AAAA,UACC,WAAWC,SAAK,CAAA;AAAA,YACd,CAAC,YAAA,CAAa,QAAQ,CAAC,GAAG,aAAiB,IAAA;AAAA,WAC5C;AAAA;AAAA,OACH;AAAA,sBACAD,cAAA;AAAA,QAAC,KAAA;AAAA,QAAA;AAAA,UACC,SAAW,EAAAC,SAAA;AAAA,YACT,YAAa,EAAA;AAAA,YACb;AAAA,cACE,CAAC,YAAA,CAAa,UAAU,CAAC,GAAG;AAAA,aAC9B;AAAA,YACA;AAAA,WACF;AAAA,UACA,eAAiB,EAAA,YAAA;AAAA,UAChB,GAAG,IAAA;AAAA,UACJ,GAAK,EAAA,YAAA;AAAA,UAEJ;AAAA;AAAA,OACH;AAAA,sBACAD,cAAA;AAAA,QAAC,KAAA;AAAA,QAAA;AAAA,UACC,WAAWC,SAAK,CAAA;AAAA,YACd,CAAC,YAAA,CAAa,QAAQ,CAAC,GAAG,aAAiB,IAAA;AAAA,WAC5C;AAAA;AAAA;AACH,KACF,EAAA,CAAA;AAAA;AAGN;;;;"}