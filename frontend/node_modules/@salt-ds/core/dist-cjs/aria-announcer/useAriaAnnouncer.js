'use strict';

var React = require('react');
var debounce = require('../utils/debounce.js');
var AriaAnnouncerContext = require('./AriaAnnouncerContext.js');

const useAriaAnnouncer = ({
  debounce: debounceInterval = 0
} = {}) => {
  const context = React.useContext(AriaAnnouncerContext.AriaAnnouncerContext);
  const mountedRef = React.useRef(true);
  const baseAnnounce = React.useCallback(
    (announcement, delay) => {
      const isReactAnnouncerInstalled = context == null ? void 0 : context.announce;
      if (process.env.NODE_ENV !== "production") ;
      function makeAnnouncement() {
        if (mountedRef.current) {
          if (isReactAnnouncerInstalled) {
            context.announce(announcement);
          }
        }
      }
      if (delay) {
        setTimeout(makeAnnouncement, delay);
      } else {
        makeAnnouncement();
      }
    },
    [context]
  );
  const announce = React.useMemo(
    () => debounceInterval > 0 ? debounce.debounce(baseAnnounce, debounceInterval) : baseAnnounce,
    [baseAnnounce, debounceInterval]
  );
  const ariaAnnouncer = React.useMemo(
    () => ({
      ...context,
      announce
    }),
    [context, announce]
  );
  React.useEffect(() => {
    mountedRef.current = true;
    return () => {
      mountedRef.current = false;
    };
  }, []);
  return ariaAnnouncer;
};

exports.useAriaAnnouncer = useAriaAnnouncer;
//# sourceMappingURL=useAriaAnnouncer.js.map
